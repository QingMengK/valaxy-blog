---
title:
 -ç»„åˆæ¨¡å¼
created: 2025-12-06
updated: 2025-12-06
type: ğŸ“˜ çŸ¥è¯†èŠ‚ç‚¹
tags:
  - é¢å‘å¯¹è±¡
  - è®¾è®¡æ¨¡å¼
---
> æ‘˜è¦ï¼šç»„åˆæ¨¡å¼è®©ä½ å¯ä»¥åƒä½¿ç”¨â€œä¸€ä¸ªå¯¹è±¡â€ä¸€æ ·ï¼Œä½¿ç”¨â€œä¸€ç»„å¯¹è±¡â€ã€‚

## ä¸€ã€ç»„åˆæ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆä¸€å¥è¯ç‰ˆï¼‰

> **ç»„åˆæ¨¡å¼**ï¼š  
> **æŠŠâ€œå•ä¸ªå¯¹è±¡â€å’Œâ€œå¯¹è±¡ç»„åˆâ€ç”¨åŒä¸€ç§æ–¹å¼å¯¹å¾…**ï¼Œè®©å®¢æˆ·ç«¯**ä¸ç”¨åŒºåˆ†**å®ƒä»¬æ˜¯ä¸€ä¸ªè¿˜æ˜¯ä¸€å †ã€‚

---

## äºŒã€ä¸€ä¸ªå°æ•…äº‹ï¼ˆèƒŒæ™¯ï¼‰

ä½ åœ¨åšä¸€ä¸ª**æ–‡ä»¶ç³»ç»Ÿ / UI ç•Œé¢ / æ¸¸æˆæŠ€èƒ½æ ‘**ï¼š

- æœ‰ **å•ä¸ªå¯¹è±¡**
    
    - æ–‡ä»¶
        
    - æŒ‰é’®
        
    - å•ä¸ªæŠ€èƒ½
        
- ä¹Ÿæœ‰ **ç»„åˆå¯¹è±¡**
    
    - æ–‡ä»¶å¤¹ï¼ˆé‡Œé¢æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼‰
        
    - é¢æ¿ï¼ˆé‡Œé¢æœ‰æŒ‰é’®å’Œå­é¢æ¿ï¼‰
        
    - æŠ€èƒ½æ ‘ï¼ˆé‡Œé¢æœ‰æŠ€èƒ½å’Œå­æŠ€èƒ½æ ‘ï¼‰
        

ğŸ‘‰ **éœ€æ±‚**ï¼š  
æˆ‘å¸Œæœ›**æ“ä½œæ–¹å¼æ˜¯ä¸€æ ·çš„**ï¼š

`æ˜¾ç¤º() è®¡ç®—å¤§å°() æ‰§è¡Œ()`

ä¸ç®¡å®ƒæ˜¯ï¼š

- ä¸€ä¸ªæ–‡ä»¶
    
- è¿˜æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼ˆåŒ…å«å¾ˆå¤šæ–‡ä»¶ï¼‰
    

---

## ä¸‰ã€ä¸ä½¿ç”¨ç»„åˆæ¨¡å¼çš„æƒ…å†µï¼ˆé—®é¢˜åœ¨å“ªé‡Œï¼‰

### âŒ ç¤ºä¾‹ï¼šæ–‡ä»¶ç³»ç»Ÿï¼ˆæ²¡æœ‰ç»„åˆæ¨¡å¼ï¼‰

```cpp
class File {
public:
    void show() {
        cout << "æ˜¾ç¤ºæ–‡ä»¶" << endl;
    }
};

class Folder {
public:
    vector<File*> files;

    void show() {
        cout << "æ˜¾ç¤ºæ–‡ä»¶å¤¹" << endl;
        for (auto f : files) {
            f->show();
        }
    }
};
```

### âŒ ä½¿ç”¨æ—¶çš„é—®é¢˜

```cpp
if (obj æ˜¯ File)
    obj.show();
else if (obj æ˜¯ Folder)
    obj.show();
```

é—®é¢˜æ€»ç»“ï¼š

- å®¢æˆ·ç«¯ **å¿…é¡»åˆ¤æ–­ç±»å‹**
    
- æ–°å¢ç±»å‹ï¼ˆæ¯”å¦‚å¿«æ·æ–¹å¼ï¼‰ä¼šå¯¼è‡´å¤§é‡ `if/else`
    
- è¿å **å¼€é—­åŸåˆ™**
    

---

## å››ã€ç»„åˆæ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³

> **å¶å­èŠ‚ç‚¹ï¼ˆLeafï¼‰å’Œç»„åˆèŠ‚ç‚¹ï¼ˆCompositeï¼‰  
> ç»§æ‰¿åŒä¸€ä¸ªæŠ½è±¡æ¥å£ï¼ˆComponentï¼‰**

---

## äº”ã€ç»„åˆæ¨¡å¼ç»“æ„ï¼ˆè®°ä½è¿™ 3 ä¸ªè§’è‰²ï¼‰

|è§’è‰²|ä½œç”¨|
|---|---|
|Component|æŠ½è±¡ç»„ä»¶ï¼ˆç»Ÿä¸€æ¥å£ï¼‰|
|Leaf|å¶å­èŠ‚ç‚¹ï¼ˆå•ä¸ªå¯¹è±¡ï¼‰|
|Composite|ç»„åˆèŠ‚ç‚¹ï¼ˆåŒ…å«å­ç»„ä»¶ï¼‰|

---

## å…­ã€C++ ç¤ºä¾‹ï¼šæ–‡ä»¶ç³»ç»Ÿï¼ˆæ¨èè®°è¿™ä¸ªï¼‰

### 1ï¸âƒ£ æŠ½è±¡ç»„ä»¶ Component

```cpp
#include <iostream>
#include <vector>
using namespace std;

class Component {
public:
    virtual void show() = 0;
    virtual ~Component() {}
};
```
---

### 2ï¸âƒ£ å¶å­èŠ‚ç‚¹ Leafï¼ˆæ–‡ä»¶ï¼‰

```cpp
class File : public Component {
private:
    string name;
public:
    File(string name) : name(name) {}

    void show() override {
        cout << "æ–‡ä»¶ï¼š" << name << endl;
    }
};
```

---

### 3ï¸âƒ£ ç»„åˆèŠ‚ç‚¹ Compositeï¼ˆæ–‡ä»¶å¤¹ï¼‰

```cpp
class Folder : public Component {
private:
    string name;
    vector<Component*> children;
public:
    Folder(string name) : name(name) {}

    void add(Component* c) {
        children.push_back(c);
    }

    void show() override {
        cout << "æ–‡ä»¶å¤¹ï¼š" << name << endl;
        for (auto c : children) {
            c->show();
        }
    }
};
```

---

### 4ï¸âƒ£ å®¢æˆ·ç«¯ä½¿ç”¨ï¼ˆâœ¨é‡ç‚¹ï¼‰

```cpp
int main() {
    Folder* root = new Folder("æ ¹ç›®å½•");

    File* f1 = new File("a.txt");
    File* f2 = new File("b.txt");

    Folder* sub = new Folder("å­ç›®å½•");
    sub->add(new File("c.txt"));

    root->add(f1);
    root->add(f2);
    root->add(sub);

    root->show();   // ç»Ÿä¸€è°ƒç”¨
}
```
ğŸ‘‰ **å®¢æˆ·ç«¯å®Œå…¨ä¸å…³å¿ƒæ˜¯ File è¿˜æ˜¯ Folder**

---

## ä¸ƒã€C# é£æ ¼ç¤ºä¾‹ï¼ˆUI åœºæ™¯ï¼‰
```cpp
interface UIComponent {
    void Draw();
}
```

### å¶å­
```cpp
class Button : UIComponent {
    public void Draw() {
        Console.WriteLine("ç»˜åˆ¶æŒ‰é’®");
    }
}
```
### ç»„åˆ

```cpp
class Panel : UIComponent {
    private List<UIComponent> children = new();

    public void Add(UIComponent c) {
        children.Add(c);
    }

    public void Draw() {
        Console.WriteLine("ç»˜åˆ¶é¢æ¿");
        foreach (var c in children) {
            c.Draw();
        }
    }
}
```

---

## å…«ã€ç»„åˆæ¨¡å¼çš„ä¼˜ç‚¹ï¼ˆè€ƒè¯• / é¢è¯•å¸¸è€ƒï¼‰

âœ… **ç»Ÿä¸€å¯¹å¾…å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡**  
âœ… **å®¢æˆ·ç«¯ä»£ç æ›´ç®€å•**  
âœ… **ç¬¦åˆå¼€é—­åŸåˆ™**  
âœ… **ç»“æ„å¤©ç„¶é€‚åˆæ ‘å½¢ç»“æ„**

---

## ä¹ã€ä»€ä¹ˆæ—¶å€™ç”¨ç»„åˆæ¨¡å¼ï¼Ÿ

âœ” æ–‡ä»¶ç³»ç»Ÿ  
âœ” UI ç»„ä»¶æ ‘  
âœ” æ¸¸æˆåœºæ™¯èŠ‚ç‚¹ï¼ˆScene Graphï¼‰  
âœ” èœå• / æƒé™ç»“æ„  
âœ” æŠ€èƒ½æ ‘ / ä»»åŠ¡æ ‘